---
openapi: 3.0.1
info:
  title: API V1
  version: v1
paths:
  "/api/v1/auth/login":
    post:
      summary: Creates a session
      tags:
      - Authentication
      parameters: []
      responses:
        '200':
          description: session created
          content:
            application/json:
              schema:
                type: object
                properties:
                  access_token:
                    type: string
                  refresh_token:
                    type: string
                required:
                - access_token
                - refresh_token
        '401':
          description: invalid credentials
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                properties:
                  error:
                    type: object
                    additionalProperties: false
                    properties:
                      status:
                        type: string
                      code:
                        type: integer
                      message:
                        type: string
                      details:
                        type: object
                        nullable: true
                    required:
                    - status
                    - code
                    - message
                    - details
                required:
                - error
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                session:
                  type: object
                  properties:
                    email:
                      type: string
                      example: user@example.com
                    password:
                      type: string
                      example: password123
                  required:
                  - email
                  - password
  "/api/v1/auth/refresh":
    post:
      summary: Refresh the access token
      tags:
      - Authentication
      security:
      - bearerAuth: []
      responses:
        '200':
          description: access token refreshed
          content:
            application/json:
              schema:
                type: object
                properties:
                  access_token:
                    type: string
                required:
                - access_token
        '401':
          description: expired token
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                properties:
                  error:
                    type: object
                    additionalProperties: false
                    properties:
                      status:
                        type: string
                      code:
                        type: integer
                      message:
                        type: string
                      details:
                        type: object
                        nullable: true
                    required:
                    - status
                    - code
                    - message
                    - details
                required:
                - error
  "/api/v1/organization/companies/{company_id}/clients":
    post:
      summary: Creates a client for a company
      tags:
      - Clients
      security:
      - bearerAuth: []
      parameters:
      - name: company_id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: client created
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/client"
        '403':
          description: forbiden
        '404':
          description: company not found
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/error"
        '401':
          description: user can not create a client within this company
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/error"
        '422':
          description: client is invalid
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/error"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                registration_number:
                  type: string
                email:
                  type: string
                phone:
                  type: string
                address_street:
                  type: string
                address_city:
                  type: string
                address_zipcode:
                  type: string
              required:
              - name
              - registration_number
              - email
              - phone
              - address_street
              - address_city
              - address_zipcode
        required: true
    get:
      summary: Lists clients for a company
      tags:
      - Clients
      security:
      - bearerAuth: []
      parameters:
      - name: company_id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: clients found
          content:
            application/json:
              schema:
                type: array
                items:
                  "$ref": "#/components/schemas/client"
        '404':
          description: company not found
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/error"
        '401':
          description: unauthorised
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/error"
  "/api/v1/organization/clients/{id}":
    get:
      summary: Show client
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '403':
          description: forbiden
        '200':
          description: client's details
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::Clients::ExtendedDto"
        '404':
          description: not found
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/error"
  "/api/v1/organization/companies":
    get:
      summary: Lists user companies
      tags:
      - Companies
      security:
      - bearerAuth: []
      responses:
        '200':
          description: successfully lists user's companies
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    name:
                      type: string
                    registration_number:
                      type: string
                    email:
                      type: string
                    phone:
                      type: string
                    address_city:
                      type: string
                    address_street:
                      type: string
                    address_zipcode:
                      type: string
                  required:
                  - id
                  - name
                  - registration_number
                  - email
                  - phone
                  - address_city
                  - address_street
                  - address_zipcode
        '403':
          description: forbidden
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                properties:
                  error:
                    type: object
                    additionalProperties: false
                    properties:
                      status:
                        type: string
                      code:
                        type: integer
                      message:
                        type: string
                      details:
                        type: object
                        nullable: true
                    required:
                    - status
                    - code
                    - message
                    - details
                required:
                - error
  "/api/v1/organization/companies/{id}":
    get:
      summary: Shows a specific company
      tags:
      - Companies
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: successfully shows the company
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                  registration_number:
                    type: string
                  email:
                    type: string
                  phone:
                    type: string
                  address_city:
                    type: string
                  address_street:
                    type: string
                  address_zipcode:
                    type: string
                required:
                - id
                - name
                - registration_number
                - email
                - phone
                - address_city
                - address_street
                - address_zipcode
        '403':
          description: forbidden
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                properties:
                  error:
                    type: object
                    additionalProperties: false
                    properties:
                      status:
                        type: string
                      code:
                        type: integer
                      message:
                        type: string
                      details:
                        type: object
                        nullable: true
                    required:
                    - status
                    - code
                    - message
                    - details
                required:
                - error
        '404':
          description: not found
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                properties:
                  error:
                    type: object
                    additionalProperties: false
                    properties:
                      status:
                        type: string
                      code:
                        type: integer
                      message:
                        type: string
                      details:
                        type: object
                        nullable: true
                    required:
                    - status
                    - code
                    - message
                    - details
                required:
                - error
  "/api/v1/organization/companies/{company_id}/projects/{project_id}/completion_snapshots":
    post:
      summary: Create a new completion snapshot on the project's last version
      tags:
      - Completion snapshot
      security:
      - bearerAuth: []
      parameters:
      - name: company_id
        in: path
        required: true
        schema:
          type: integer
      - name: project_id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: completion snapshot successfully created
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::CompletionSnapshots::ExtendedDto"
        '422':
          description: unprocessable entity
        '401':
          description: unauthorised
        '403':
          description: forbiden
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - completion_snapshot_items
              properties:
                description:
                  type: string
                  nullable: true
                completion_snapshot_items:
                  type: array
                  items:
                    "$ref": "#/components/schemas/Organization::CreateCompletionSnapshotItemDto"
  "/api/v1/organization/completion_snapshots/{id}":
    parameters:
    - name: id
      in: path
      required: true
      schema:
        type: integer
    get:
      summary: Show completion snapshot details
      tags:
      - Completion snapshot
      security:
      - bearerAuth: []
      responses:
        '200':
          description: show completion_snapshot
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::CompletionSnapshots::ExtendedDto"
        '404':
          description: not found
    put:
      summary: Update completion snapshot
      tags:
      - Completion snapshot
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '403':
          description: forbiden
        '200':
          description: updates completion snapshot
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::CompletionSnapshots::ExtendedDto"
        '422':
          description: unprocessable entity
        '404':
          description: not found
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - completion_snapshot_items
              properties:
                description:
                  type: string
                  nullable: true
                completion_snapshot_items:
                  type: array
                  items:
                    "$ref": "#/components/schemas/Organization::CompletionSnapshots::UpdatableCompletionSnapshotItem"
    delete:
      summary: Delete completion snapshot
      tags:
      - Completion snapshot
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '204':
          description: no content
        '403':
          description: forbiden
        '422':
          description: unprocessable entity
        '404':
          description: not found
  "/api/v1/organization/completion_snapshots/{id}/previous":
    parameters:
    - name: id
      in: path
      required: true
      schema:
        type: integer
    get:
      summary: Show previous completion snapshot details
      tags:
      - Completion snapshot
      security:
      - bearerAuth: []
      responses:
        '200':
          description: show previous completion_snapshot
          content:
            application/json:
              schema:
                type: object
                required: []
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::CompletionSnapshots::ExtendedDto"
                    nullable: true
        '404':
          description: not found
  "/api/v1/organization/completion_snapshots/{id}/publish":
    parameters:
    - name: id
      in: path
      required: true
      schema:
        type: integer
    post:
      summary: Publish the completion snapshot
      tags:
      - Completion snapshot
      security:
      - bearerAuth: []
      responses:
        '200':
          description: completion snapshot published
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::CompletionSnapshots::ExtendedDto"
        '403':
          description: forbiden
        '422':
          description: unprocessable entity
  "/api/v1/organization/completion_snapshots/{id}/cancel":
    parameters:
    - name: id
      in: path
      required: true
      schema:
        type: integer
    post:
      summary: Cancel the completion snapshot
      tags:
      - Completion snapshot
      security:
      - bearerAuth: []
      responses:
        '200':
          description: completion snapshot cancelled
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::CompletionSnapshots::ExtendedDto"
        '403':
          description: forbiden
        '422':
          description: unprocessable entity
  "/api/v1/organization/completion_snapshots":
    get:
      summary: List all project version completion snapshot
      parameters:
      - name: filter
        in: query
        schema:
          type: object
          required: []
          properties:
            company_id:
              type: integer
              nullable: true
            project_id:
              type: integer
              nullable: true
            project_version_id:
              type: integer
              nullable: true
      - name: query
        in: query
        schema:
          type: object
          required: []
          properties:
            limit:
              type: integer
              nullable: true
      tags:
      - Completion snapshot
      security:
      - bearerAuth: []
      responses:
        '200':
          description: list completion_snapshot
          content:
            application/json:
              schema:
                type: object
                required:
                - results
                properties:
                  results:
                    type: array
                    items:
                      "$ref": "#/components/schemas/Organization::CompletionSnapshots::CompactDto"
  "/api/v1/organization/project_versions/{project_version_id}/completion_snapshots/new_completion_snapshot_data":
    parameters:
    - name: project_version_id
      in: path
      required: true
      schema:
        type: integer
    get:
      summary: Get the draft completion snapshot data
      tags:
      - Completion snapshot
      security:
      - bearerAuth: []
      responses:
        '200':
          description: draft completion snapshot
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::CompletionSnapshots::NewCompletionSnapshotDataDto::DraftCompletionSnapshot"
  "/api/v1/organization/project_versions/{project_version_id}/invoices/completion_snapshot":
    post:
      summary: Creates a completion snapshot invoice
      tags:
      - Invoices
      security:
      - bearerAuth: []
      parameters:
      - name: project_version_id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: successfully creates completion snapshot invoice
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::Invoices::CompletionSnapshots::ExtendedDto"
        '403':
          description: forbiden
        '404':
          description: not_found
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                properties:
                  error:
                    type: object
                    additionalProperties: false
                    properties:
                      status:
                        type: string
                      code:
                        type: integer
                      message:
                        type: string
                      details:
                        type: object
                        nullable: true
                    required:
                    - status
                    - code
                    - message
                    - details
                required:
                - error
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - invoice_amounts
              properties:
                invoice_amounts:
                  type: array
                  items:
                    "$ref": "#/components/schemas/Organization::Invoices::CompletionSnapshots::CreateDto::InvoiceAmount"
  "/api/v1/organization/projects/{project_id}/invoices":
    get:
      summary: Lists invoices for a project
      tags:
      - Invoices
      security:
      - bearerAuth: []
      parameters:
      - name: project_id
        in: path
        required: true
        schema:
          type: integer
      - name: status
        in: query
        schema:
          type: array
          items:
            type: string
            enum:
            - draft
            - posted
            - cancelled
            - voided
      responses:
        '200':
          description: invoices found
          content:
            application/json:
              schema:
                type: object
                required:
                - results
                properties:
                  results:
                    type: array
                    items:
                      "$ref": "#/components/schemas/Organization::Invoices::CompactDto"
        '404':
          description: project not found
        '403':
          description: forbiden
    post:
      summary: Creates an invoice
      tags:
      - Invoices
      security:
      - bearerAuth: []
      parameters:
      - name: project_id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: successfully creates completion snapshot invoice
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::Invoices::ExtendedDto"
        '403':
          description: forbiden
        '404':
          description: not_found
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                properties:
                  error:
                    type: object
                    additionalProperties: false
                    properties:
                      status:
                        type: string
                      code:
                        type: integer
                      message:
                        type: string
                      details:
                        type: object
                        nullable: true
                    required:
                    - status
                    - code
                    - message
                    - details
                required:
                - error
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - invoice_amounts
              properties:
                invoice_amounts:
                  type: array
                  items:
                    type: object
                    required:
                    - original_item_uuid
                    - invoice_amount
                    properties:
                      original_item_uuid:
                        type: string
                      invoice_amount:
                        type: string
                        format: decimal
        required: true
  "/api/v1/organization/projects/{project_id}/invoices/{id}":
    get:
      summary: Show invoice
      tags:
      - Invoices
      security:
      - bearerAuth: []
      parameters:
      - name: project_id
        in: path
        required: true
        schema:
          type: integer
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: invoice found
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::Invoices::ExtendedDto"
        '404':
          description: invoice not found
        '403':
          description: forbiden
    put:
      summary: Update invoice
      tags:
      - Invoices
      security:
      - bearerAuth: []
      parameters:
      - name: project_id
        in: path
        required: true
        schema:
          type: integer
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: invoice updated
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::Invoices::ExtendedDto"
        '404':
          description: invoice not found
        '422':
          description: unprocessable entity
        '403':
          description: forbiden
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - invoice_amounts
              properties:
                invoice_amounts:
                  type: array
                  items:
                    type: object
                    required:
                    - original_item_uuid
                    - invoice_amount
                    properties:
                      original_item_uuid:
                        type: string
                      invoice_amount:
                        type: string
                        format: decimal
        required: true
    post:
      summary: Post invoice
      tags:
      - Invoices
      security:
      - bearerAuth: []
      parameters:
      - name: project_id
        in: path
        required: true
        schema:
          type: integer
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: invoice posted
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::Invoices::ExtendedDto"
        '404':
          description: invoice not found
        '422':
          description: unprocessable entity
        '403':
          description: forbiden
  "/api/v1/organization/companies/{company_id}/projects/{project_id}/versions":
    get:
      summary: List all the project's versions
      tags:
      - Project versions
      security:
      - bearerAuth: []
      parameters:
      - name: company_id
        in: path
        required: true
        schema:
          type: integer
      - name: project_id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: list company's projects
          content:
            application/json:
              schema:
                type: object
                required:
                - results
                properties:
                  results:
                    type: array
                    items:
                      "$ref": "#/components/schemas/Organization::ProjectVersionIndexResponseProjectDto"
        '401':
          description: not authorised
        '404':
          description: not found
  "/api/v1/organization/companies/{company_id}/projects/{project_id}/versions/{id}":
    get:
      summary: Show the project version details
      tags:
      - Project versions
      security:
      - bearerAuth: []
      parameters:
      - name: company_id
        in: path
        required: true
        schema:
          type: integer
      - name: project_id
        in: path
        required: true
        schema:
          type: integer
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: show project version details
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::ProjectVersions::ExtendedDto"
        '401':
          description: not authorised
        '404':
          description: not found
  "/api/v1/organization/companies/{company_id}/projects":
    post:
      summary: Creates a new project and its descendants
      tags:
      - Projects
      security:
      - bearerAuth: []
      parameters:
      - name: company_id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: project created
          content:
            application/json:
              schema:
                type: object
                required:
                - id
                - name
                - client_id
                - versions
                properties:
                  id:
                    type: integer
                  name:
                    type: string
                  description:
                    type: string
                    nullable: true
                  client_id:
                    type: integer
                  versions:
                    type: array
                    items:
                      "$ref": "#/components/schemas/Organization::ProjectDtoProjectVersionDto"
        '404':
          description: not found
        '401':
          description: not authorised
        '422':
          description: unprocessable entity
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/error"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - name
              - client_id
              - retention_guarantee_rate
              - items
              properties:
                name:
                  type: string
                description:
                  type: string
                  nullable: true
                client_id:
                  type: integer
                retention_guarantee_rate:
                  type: integer
                items:
                  oneOf:
                  - type: array
                    items:
                      "$ref": "#/components/schemas/Organization::CreateProjecItemDto"
                  - type: array
                    items:
                      "$ref": "#/components/schemas/Organization::CreateProjectItemGroupDto"
    get:
      summary: List all the company's project
      tags:
      - Projects
      security:
      - bearerAuth: []
      parameters:
      - name: company_id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: list company's projects
          content:
            application/json:
              schema:
                type: object
                required:
                - results
                properties:
                  results:
                    type: array
                    items:
                      "$ref": "#/components/schemas/Organization::Projects::CompactDto"
        '401':
          description: not authorised
        '404':
          description: not found
  "/api/v1/organization/companies/{company_id}/projects/{id}":
    get:
      summary: Show the project details
      tags:
      - Projects
      security:
      - bearerAuth: []
      parameters:
      - name: company_id
        in: path
        required: true
        schema:
          type: integer
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: list company's projects
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::ProjectShowResponseProjectDto"
        '401':
          description: not authorised
        '404':
          description: not found
  "/api/v1/organization/projects/{id}/invoiced_items":
    get:
      summary: invoiced amount for each item
      tags:
      - Projects
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: ok
          content:
            application/json:
              schema:
                type: object
                required:
                - results
                properties:
                  results:
                    type: array
                    items:
                      "$ref": "#/components/schemas/Organization::Projects::InvoicedItemDto"
        '404':
          description: not_found
        '403':
          description: forbiden
components:
  schemas:
    client:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        registration_number:
          type: string
        email:
          type: string
        phone:
          type: string
        address_city:
          type: string
        address_street:
          type: string
        address_zipcode:
          type: string
      required:
      - id
      - name
      - registration_number
      - email
      - phone
      - address_city
      - address_street
      - address_zipcode
    create_project_with_item_groups:
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        client_id:
          type: string
        project_versions_attributes:
          type: array
          items:
            type: object
            properties:
              retention_guarantee_rate:
                type: integer
              item_groups_attributes:
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                    description:
                      type: string
                    position:
                      type: integer
                    items_attributes:
                      type: array
                      items:
                        type: object
                        properties:
                          name:
                            type: string
                          description:
                            type: string
                          position:
                            type: integer
                          quantity:
                            type: integer
                          unit_price_cents:
                            type: integer
                          unit:
                            type: string
                        required:
                        - name
                        - position
                        - quantity
                        - unit_price_cents
                        - unit
                  required:
                  - name
                  - position
                  - items_attributes
            required:
            - retention_guarantee_rate
            - item_groups_attributes
      required:
      - name
      - project_versions_attributes
    create_project_with_items:
      type: object
      properties:
        name:
          type: string
        client_id:
          type: string
        description:
          type: string
        project_versions_attributes:
          type: array
          items:
            type: object
            properties:
              retention_guarantee_rate:
                type: integer
              items_attributes:
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                    description:
                      type: string
                    position:
                      type: integer
                    quantity:
                      type: integer
                    unit_price_cents:
                      type: integer
                    unit:
                      type: string
                  required:
                  - name
                  - position
                  - quantity
                  - unit_price_cents
                  - unit
            required:
            - retention_guarantee_rate
            - items_attributes
      required:
      - name
      - project_versions_attributes
    error:
      type: object
      additionalProperties: false
      properties:
        error:
          type: object
          additionalProperties: false
          properties:
            status:
              type: string
            code:
              type: integer
            message:
              type: string
            details:
              type: object
              nullable: true
          required:
          - status
          - code
          - message
          - details
      required:
      - error
    Organization::Clients::ExtendedDto:
      type: object
      required:
      - id
      - name
      - registration_number
      - email
      - phone
      - address_street
      - address_city
      - address_zipcode
      properties:
        id:
          type: integer
        name:
          type: string
        registration_number:
          type: string
        email:
          type: string
        phone:
          type: string
        address_street:
          type: string
        address_city:
          type: string
        address_zipcode:
          type: string
    Organization::Clients::ShowDto:
      type: object
      required:
      - result
      properties:
        result:
          "$ref": "#/components/schemas/Organization::Clients::ExtendedDto"
    Organization::CompletionSnapshotDtoItemDto:
      type: object
      required:
      - completion_percentage
      - item_id
      properties:
        completion_percentage:
          type: string
          format: decimal
        item_id:
          type: integer
    Organization::CompletionSnapshotDto:
      type: object
      required:
      - id
      - created_at
      - project_version
      - status
      properties:
        id:
          type: integer
        created_at:
          type: string
          format: date-time
        project_version:
          "$ref": "#/components/schemas/Organization::ProjectVersions::CompactDto"
        description:
          type: string
          nullable: true
        status:
          type: string
          enum:
          - draft
          - cancelled
          - published
    Organization::ProjectVersions::CompactDto:
      type: object
      required:
      - id
      - number
      - created_at
      - retention_guarantee_rate
      - total_amount
      properties:
        id:
          type: integer
        number:
          type: integer
        created_at:
          type: string
          format: date-time
        retention_guarantee_rate:
          type: integer
        total_amount:
          type: string
          format: decimal
    Organization::CompletionSnapshotIndexRequestDto:
      type: object
      required: []
      properties:
        company_id:
          type: integer
          nullable: true
        project_id:
          type: integer
          nullable: true
        project_version_id:
          type: integer
          nullable: true
    Organization::CompletionSnapshotIndexResponseDto:
      type: object
      required:
      - results
      properties:
        results:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::CompletionSnapshotDto"
    Organization::CompletionSnapshotItems::ExtendedDto:
      type: object
      required:
      - completion_percentage
      - item_id
      properties:
        completion_percentage:
          type: string
          format: decimal
        item_id:
          type: integer
    Organization::CompletionSnapshots::CompactDto:
      type: object
      required:
      - id
      - status
      - project_version
      - created_at
      properties:
        id:
          type: integer
        description:
          type: string
          nullable: true
        status:
          type: string
          enum:
          - draft
          - cancelled
          - published
        project_version:
          "$ref": "#/components/schemas/Organization::ProjectVersions::CompactDto"
        created_at:
          type: string
          format: date-time
    Organization::CompletionSnapshots::ExtendedDto:
      type: object
      required:
      - id
      - status
      - project_version
      - completion_snapshot_items
      - invoice
      - created_at
      properties:
        id:
          type: integer
        status:
          type: string
          enum:
          - draft
          - cancelled
          - published
        project_version:
          "$ref": "#/components/schemas/Organization::ProjectVersions::ExtendedDto"
        completion_snapshot_items:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::CompletionSnapshotItems::ExtendedDto"
        invoice:
          "$ref": "#/components/schemas/Organization::Invoices::ExtendedDto"
        created_at:
          type: string
          format: date-time
    Organization::ProjectVersions::ExtendedDto:
      type: object
      required:
      - id
      - number
      - created_at
      - retention_guarantee_rate
      - ungrouped_items
      - item_groups
      - items
      properties:
        id:
          type: integer
        number:
          type: integer
        created_at:
          type: string
          format: date-time
        retention_guarantee_rate:
          type: integer
        ungrouped_items:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Items::ExtendedDto"
        item_groups:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::ItemGroups::ExtendedDto"
        items:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Items::ExtendedDto"
    Organization::Items::ExtendedDto:
      type: object
      required:
      - id
      - original_item_uuid
      - position
      - name
      - quantity
      - unit
      - unit_price_cents
      properties:
        id:
          type: integer
        original_item_uuid:
          type: string
        position:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        quantity:
          type: integer
        unit:
          type: string
        unit_price_cents:
          type: integer
        item_group_id:
          type: integer
          nullable: true
    Organization::ItemGroups::ExtendedDto:
      type: object
      required:
      - id
      - position
      - name
      - grouped_items
      properties:
        id:
          type: integer
        position:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        grouped_items:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Items::ExtendedDto"
    Organization::Invoices::ExtendedDto::Line:
      type: object
      required:
      - holder_id
      - excl_tax_amount
      properties:
        holder_id:
          type: string
        excl_tax_amount:
          type: string
          format: decimal
    Organization::Invoices::ExtendedDto::Detail:
      type: object
      required:
      - delivery_date
      - seller_name
      - seller_registration_number
      - seller_address_zipcode
      - seller_address_street
      - seller_address_city
      - seller_vat_number
      - seller_phone
      - seller_email
      - client_name
      - client_registration_number
      - client_address_zipcode
      - client_address_street
      - client_address_city
      - client_vat_number
      - client_phone
      - client_email
      - delivery_name
      - delivery_registration_number
      - delivery_address_zipcode
      - delivery_address_street
      - delivery_address_city
      - delivery_phone
      - delivery_email
      - purchase_order_number
      - due_date
      properties:
        delivery_date:
          type: string
          format: date-time
        seller_name:
          type: string
        seller_registration_number:
          type: string
        seller_address_zipcode:
          type: string
        seller_address_street:
          type: string
        seller_address_city:
          type: string
        seller_vat_number:
          type: string
        seller_phone:
          type: string
        seller_email:
          type: string
        client_name:
          type: string
        client_registration_number:
          type: string
        client_address_zipcode:
          type: string
        client_address_street:
          type: string
        client_address_city:
          type: string
        client_vat_number:
          type: string
        client_phone:
          type: string
        client_email:
          type: string
        delivery_name:
          type: string
        delivery_registration_number:
          type: string
        delivery_address_zipcode:
          type: string
        delivery_address_street:
          type: string
        delivery_address_city:
          type: string
        delivery_phone:
          type: string
        delivery_email:
          type: string
        purchase_order_number:
          type: string
        due_date:
          type: string
          format: date-time
    Organization::Invoices::ExtendedDto::Context::ProjectVersionItem:
      type: object
      required:
      - original_item_uuid
      - group_id
      - name
      - quantity
      - unit
      - unit_price_amount
      - tax_rate
      - previously_billed_amount
      properties:
        original_item_uuid:
          type: string
        group_id:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        quantity:
          type: integer
        unit:
          type: string
        unit_price_amount:
          type: string
          format: decimal
        tax_rate:
          type: string
          format: decimal
        previously_billed_amount:
          type: string
          format: decimal
    Organization::Invoices::ExtendedDto::Context::ProjectVersionItemGroup:
      type: object
      required:
      - id
      - name
      properties:
        id:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
    Organization::Invoices::ExtendedDto::Context:
      type: object
      required:
      - project_version_retention_guarantee_rate
      - project_version_number
      - project_version_date
      - project_total_amount
      - project_total_previously_billed_amount
      - project_version_items
      - project_version_item_groups
      properties:
        project_version_retention_guarantee_rate:
          type: string
          format: decimal
        project_version_number:
          type: integer
        project_version_date:
          type: string
        project_total_amount:
          type: string
          format: decimal
        project_total_previously_billed_amount:
          type: string
          format: decimal
        project_version_items:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Invoices::ExtendedDto::Context::ProjectVersionItem"
        project_version_item_groups:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Invoices::ExtendedDto::Context::ProjectVersionItemGroup"
    Organization::Invoices::ExtendedDto:
      type: object
      required:
      - id
      - status
      - updated_at
      - lines
      - detail
      - context
      properties:
        id:
          type: integer
        status:
          type: string
          enum:
          - draft
          - posted
          - cancelled
          - voided
        number:
          type: string
          nullable: true
        updated_at:
          type: string
          format: date-time
        lines:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Invoices::ExtendedDto::Line"
        detail:
          "$ref": "#/components/schemas/Organization::Invoices::ExtendedDto::Detail"
        context:
          "$ref": "#/components/schemas/Organization::Invoices::ExtendedDto::Context"
        pdf_url:
          type: string
          nullable: true
    Organization::CompletionSnapshots::IndexDto:
      type: object
      required:
      - results
      properties:
        results:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::CompletionSnapshots::CompactDto"
    Organization::CompletionSnapshots::NewCompletionSnapshotDataDto::DraftInvoice::ProjectVersion:
      type: object
      required:
      - date
      - number
      properties:
        date:
          type: string
          format: date-time
        number:
          type: integer
    Organization::CompletionSnapshots::NewCompletionSnapshotDataDto::DraftInvoice::ProjectContext:
      type: object
      required:
      - name
      - version
      - total_amount
      - previously_billed_amount
      - remaining_amount
      properties:
        name:
          type: string
        version:
          "$ref": "#/components/schemas/Organization::CompletionSnapshots::NewCompletionSnapshotDataDto::DraftInvoice::ProjectVersion"
        total_amount:
          type: string
          format: decimal
        previously_billed_amount:
          type: string
          format: decimal
        remaining_amount:
          type: string
          format: decimal
    Organization::CompletionSnapshots::NewCompletionSnapshotDataDto::DraftInvoice::Item:
      type: object
      required:
      - id
      - original_item_uuid
      - name
      - item_group_id
      - quantity
      - unit
      - unit_price_amount
      - total_amount
      - previously_invoiced_amount
      - completion_percentage
      - completion_amount
      - invoice_amount
      properties:
        id:
          type: integer
        original_item_uuid:
          type: string
        name:
          type: string
        description:
          type: string
          nullable: true
        item_group_id:
          type: integer
        quantity:
          type: integer
        unit:
          type: string
        unit_price_amount:
          type: string
          format: decimal
        total_amount:
          type: string
          format: decimal
        previously_invoiced_amount:
          type: string
          format: decimal
        completion_percentage:
          type: string
          format: decimal
        completion_amount:
          type: string
          format: decimal
        invoice_amount:
          type: string
          format: decimal
    Organization::CompletionSnapshots::NewCompletionSnapshotDataDto::DraftInvoice::ItemGroup:
      type: object
      required:
      - id
      - name
      - position
      properties:
        id:
          type: integer
        name:
          type: string
        position:
          type: integer
        description:
          type: string
          nullable: true
    Organization::CompletionSnapshots::NewCompletionSnapshotDataDto::DraftInvoice::Transaction:
      type: object
      required:
      - total_excl_tax_amount
      - tax_rate
      - tax_amount
      - retention_guarantee_amount
      - retention_guarantee_rate
      - items
      - item_groups
      - invoice_total_amount
      properties:
        total_excl_tax_amount:
          type: string
          format: decimal
        tax_rate:
          type: string
          format: decimal
        tax_amount:
          type: string
          format: decimal
        retention_guarantee_amount:
          type: string
          format: decimal
        retention_guarantee_rate:
          type: string
          format: decimal
        items:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::CompletionSnapshots::NewCompletionSnapshotDataDto::DraftInvoice::Item"
        item_groups:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::CompletionSnapshots::NewCompletionSnapshotDataDto::DraftInvoice::ItemGroup"
        invoice_total_amount:
          type: string
          format: decimal
    Organization::CompletionSnapshots::NewCompletionSnapshotDataDto::DraftInvoice::Payload:
      type: object
      required:
      - project_context
      - transaction
      properties:
        project_context:
          "$ref": "#/components/schemas/Organization::CompletionSnapshots::NewCompletionSnapshotDataDto::DraftInvoice::ProjectContext"
        transaction:
          "$ref": "#/components/schemas/Organization::CompletionSnapshots::NewCompletionSnapshotDataDto::DraftInvoice::Transaction"
    Organization::CompletionSnapshots::NewCompletionSnapshotDataDto::DraftInvoice:
      type: object
      required:
      - payload
      properties:
        payload:
          "$ref": "#/components/schemas/Organization::CompletionSnapshots::NewCompletionSnapshotDataDto::DraftInvoice::Payload"
    Organization::CompletionSnapshots::NewCompletionSnapshotDataDto::DraftCompletionSnapshot:
      type: object
      required:
      - invoice
      properties:
        invoice:
          "$ref": "#/components/schemas/Organization::CompletionSnapshots::NewCompletionSnapshotDataDto::DraftInvoice"
    Organization::CompletionSnapshots::NewCompletionSnapshotDataDto:
      type: object
      required:
      - result
      properties:
        result:
          "$ref": "#/components/schemas/Organization::CompletionSnapshots::NewCompletionSnapshotDataDto::DraftCompletionSnapshot"
    Organization::CompletionSnapshots::PreviousDto:
      type: object
      required: []
      properties:
        result:
          "$ref": "#/components/schemas/Organization::CompletionSnapshots::ExtendedDto"
          nullable: true
    Organization::CompletionSnapshots::ShowDto:
      type: object
      required:
      - result
      properties:
        result:
          "$ref": "#/components/schemas/Organization::CompletionSnapshots::ExtendedDto"
    Organization::CompletionSnapshots::UpdatableCompletionSnapshotItem:
      type: object
      required:
      - completion_percentage
      - item_id
      properties:
        completion_percentage:
          type: string
        item_id:
          type: integer
    Organization::CompletionSnapshots::UpdateDto:
      type: object
      required:
      - completion_snapshot_items
      properties:
        description:
          type: string
          nullable: true
        completion_snapshot_items:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::CompletionSnapshots::UpdatableCompletionSnapshotItem"
    Organization::CreateCompletionSnapshotItemDto:
      type: object
      required:
      - completion_percentage
      - item_id
      properties:
        completion_percentage:
          type: string
        item_id:
          type: integer
    Organization::CreateCompletionSnapshotDto:
      type: object
      required:
      - completion_snapshot_items
      properties:
        description:
          type: string
          nullable: true
        completion_snapshot_items:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::CreateCompletionSnapshotItemDto"
    Organization::CreateProjecItemDto:
      type: object
      required:
      - name
      - position
      - unit
      - unit_price_cents
      - quantity
      properties:
        name:
          type: string
        description:
          type: string
          nullable: true
        position:
          type: integer
        unit:
          type: string
        unit_price_cents:
          type: integer
        quantity:
          type: integer
    Organization::CreateProjectItemGroupDto:
      type: object
      required:
      - name
      - position
      - items
      properties:
        name:
          type: string
        description:
          type: string
          nullable: true
        position:
          type: integer
        items:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::CreateProjecItemDto"
    Organization::CreateProjectDto:
      type: object
      required:
      - name
      - client_id
      - retention_guarantee_rate
      - items
      properties:
        name:
          type: string
        description:
          type: string
          nullable: true
        client_id:
          type: integer
        retention_guarantee_rate:
          type: integer
        items:
          oneOf:
          - type: array
            items:
              "$ref": "#/components/schemas/Organization::CreateProjecItemDto"
          - type: array
            items:
              "$ref": "#/components/schemas/Organization::CreateProjectItemGroupDto"
    Organization::CreditNotes::ExtendedDto::DocumentInfo:
      type: object
      required:
      - number
      - issue_date
      - original_invoice_date
      - original_invoice_number
      properties:
        number:
          type: string
        issue_date:
          type: string
          format: date-time
        original_invoice_date:
          type: string
          format: date-time
        original_invoice_number:
          type: string
    Organization::CreditNotes::ExtendedDto::Address:
      type: object
      required:
      - city
      - street
      - zip
      properties:
        city:
          type: string
        street:
          type: string
        zip:
          type: string
    Organization::CreditNotes::ExtendedDto::Seller:
      type: object
      required:
      - name
      - address
      - phone
      - siret
      - legal_form
      - capital_amount
      - vat_number
      - rcs_city
      - rcs_number
      properties:
        name:
          type: string
        address:
          "$ref": "#/components/schemas/Organization::CreditNotes::ExtendedDto::Address"
        phone:
          type: string
        siret:
          type: string
        legal_form:
          type: string
        capital_amount:
          type: string
          format: decimal
        vat_number:
          type: string
        rcs_city:
          type: string
        rcs_number:
          type: string
    Organization::CreditNotes::ExtendedDto::BillingAddress:
      type: object
      required:
      - name
      - address
      properties:
        name:
          type: string
        address:
          "$ref": "#/components/schemas/Organization::CreditNotes::ExtendedDto::Address"
    Organization::CreditNotes::ExtendedDto::ProjectVersion:
      type: object
      required:
      - date
      - number
      properties:
        date:
          type: string
          format: date-time
        number:
          type: integer
    Organization::CreditNotes::ExtendedDto::ProjectContext:
      type: object
      required:
      - name
      - version
      - total_amount
      - previously_billed_amount
      - remaining_amount
      properties:
        name:
          type: string
        version:
          "$ref": "#/components/schemas/Organization::CreditNotes::ExtendedDto::ProjectVersion"
        total_amount:
          type: string
          format: decimal
        previously_billed_amount:
          type: string
          format: decimal
        remaining_amount:
          type: string
          format: decimal
    Organization::CreditNotes::ExtendedDto::Item:
      type: object
      required:
      - id
      - original_item_uuid
      - name
      - item_group_id
      - quantity
      - unit
      - unit_price_amount
      - credit_note_amount
      properties:
        id:
          type: integer
        original_item_uuid:
          type: string
        name:
          type: string
        description:
          type: string
          nullable: true
        item_group_id:
          type: integer
        quantity:
          type: integer
        unit:
          type: string
        unit_price_amount:
          type: string
          format: decimal
        credit_note_amount:
          type: string
          format: decimal
    Organization::CreditNotes::ExtendedDto::ItemGroup:
      type: object
      required:
      - id
      - name
      - position
      properties:
        id:
          type: integer
        name:
          type: string
        position:
          type: integer
        description:
          type: string
          nullable: true
    Organization::CreditNotes::ExtendedDto::Transaction:
      type: object
      required:
      - total_excl_tax_amount
      - tax_rate
      - tax_amount
      - retention_guarantee_amount
      - retention_guarantee_rate
      - total_incl_tax_amount
      - items
      - item_groups
      - credit_note_total_amount
      properties:
        total_excl_tax_amount:
          type: string
          format: decimal
        tax_rate:
          type: string
          format: decimal
        tax_amount:
          type: string
          format: decimal
        retention_guarantee_amount:
          type: string
          format: decimal
        retention_guarantee_rate:
          type: string
          format: decimal
        total_incl_tax_amount:
          type: string
          format: decimal
        items:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::CreditNotes::ExtendedDto::Item"
        item_groups:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::CreditNotes::ExtendedDto::ItemGroup"
        credit_note_total_amount:
          type: string
          format: decimal
    Organization::CreditNotes::ExtendedDto::Payload:
      type: object
      required:
      - document_info
      - seller
      - billing_address
      - project_context
      - transaction
      properties:
        document_info:
          "$ref": "#/components/schemas/Organization::CreditNotes::ExtendedDto::DocumentInfo"
        seller:
          "$ref": "#/components/schemas/Organization::CreditNotes::ExtendedDto::Seller"
        billing_address:
          "$ref": "#/components/schemas/Organization::CreditNotes::ExtendedDto::BillingAddress"
        project_context:
          "$ref": "#/components/schemas/Organization::CreditNotes::ExtendedDto::ProjectContext"
        transaction:
          "$ref": "#/components/schemas/Organization::CreditNotes::ExtendedDto::Transaction"
    Organization::CreditNotes::ExtendedDto:
      type: object
      required:
      - payload
      - status
      properties:
        pdf_url:
          type: string
          nullable: true
        payload:
          "$ref": "#/components/schemas/Organization::CreditNotes::ExtendedDto::Payload"
        status:
          type: string
          enum:
          - draft
          - published
    Organization::Invoices::CompactDto::Line:
      type: object
      required:
      - holder_id
      - excl_tax_amount
      properties:
        holder_id:
          type: string
        excl_tax_amount:
          type: string
          format: decimal
    Organization::Invoices::CompactDto:
      type: object
      required:
      - id
      - status
      - updated_at
      - total_amount
      - lines
      properties:
        id:
          type: integer
        status:
          type: string
          enum:
          - draft
          - posted
          - cancelled
          - voided
        number:
          type: string
          nullable: true
        updated_at:
          type: string
          format: date-time
        total_amount:
          type: string
          format: decimal
        lines:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Invoices::CompactDto::Line"
    Organization::Invoices::CompletionSnapshots::CreateDto::InvoiceAmount:
      type: object
      required:
      - original_item_uuid
      - invoice_amount
      properties:
        original_item_uuid:
          type: string
        invoice_amount:
          type: string
          format: decimal
    Organization::Invoices::CompletionSnapshots::CreateDto:
      type: object
      required:
      - invoice_amounts
      properties:
        invoice_amounts:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Invoices::CompletionSnapshots::CreateDto::InvoiceAmount"
    Organization::Invoices::CompletionSnapshots::ExtendedDto:
      type: object
      required:
      - id
      properties:
        id:
          type: integer
    Organization::Invoices::CompletionSnapshots::ShowDto:
      type: object
      required:
      - result
      properties:
        result:
          "$ref": "#/components/schemas/Organization::Invoices::CompletionSnapshots::ExtendedDto"
    Organization::Invoices::IndexDto:
      type: object
      required:
      - results
      properties:
        results:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Invoices::CompactDto"
    Organization::Invoices::ShowDto:
      type: object
      required:
      - result
      properties:
        result:
          "$ref": "#/components/schemas/Organization::Invoices::ExtendedDto"
    Organization::ProjectDtoItemDto:
      type: object
      required:
      - id
      - position
      - name
      - quantity
      - unit
      - unit_price_cents
      properties:
        id:
          type: integer
        position:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        quantity:
          type: integer
        unit:
          type: string
        unit_price_cents:
          type: integer
    Organization::ProjectDtoItemGroupDto:
      type: object
      required:
      - id
      - name
      - position
      - items
      properties:
        id:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        position:
          type: integer
        items:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::ProjectDtoItemDto"
    Organization::ProjectDtoProjectVersionDto:
      type: object
      required:
      - id
      - retention_rate_guarantee
      - number
      - items
      properties:
        id:
          type: integer
        retention_rate_guarantee:
          type: integer
        number:
          type: integer
        items:
          oneOf:
          - type: array
            items:
              "$ref": "#/components/schemas/Organization::ProjectDtoItemDto"
          - type: array
            items:
              "$ref": "#/components/schemas/Organization::ProjectDtoItemGroupDto"
    Organization::ProjectDto:
      type: object
      required:
      - id
      - name
      - client_id
      - versions
      properties:
        id:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        client_id:
          type: integer
        versions:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::ProjectDtoProjectVersionDto"
    Organization::ProjectIndexResponseProjectClientDto:
      type: object
      required:
      - id
      - name
      properties:
        id:
          type: integer
        name:
          type: string
    Organization::ProjectIndexResponseProjectDto:
      type: object
      required:
      - id
      - name
      - client
      - last_version
      - status
      properties:
        id:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        client:
          "$ref": "#/components/schemas/Organization::ProjectIndexResponseProjectClientDto"
        last_version:
          "$ref": "#/components/schemas/Organization::ProjectVersions::CompactDto"
        status:
          type: string
          enum:
          - new
          - invoicing_in_progress
          - invoiced
          - canceled
    Organization::ProjectIndexResponseDto:
      type: object
      required:
      - results
      properties:
        results:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::ProjectIndexResponseProjectDto"
    Organization::ProjectShowResponseProjectClientDto:
      type: object
      required:
      - id
      - name
      - email
      - phone
      properties:
        id:
          type: integer
        name:
          type: string
        email:
          type: string
        phone:
          type: string
    Organization::ProjectShowResponseProjectItemDto:
      type: object
      required:
      - id
      - original_item_uuid
      - position
      - name
      - quantity
      - unit
      - unit_price_cents
      properties:
        id:
          type: integer
        original_item_uuid:
          type: string
        position:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        quantity:
          type: integer
        unit:
          type: string
        unit_price_cents:
          type: integer
    Organization::ProjectShowResponseProjectItemGroupDto:
      type: object
      required:
      - id
      - position
      - name
      - grouped_items
      properties:
        id:
          type: integer
        position:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        grouped_items:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::ProjectShowResponseProjectItemDto"
    Organization::ProjectShowResponseProjectLastVersionDto:
      type: object
      required:
      - id
      - number
      - total_amount
      - created_at
      - completion_snapshots
      - ungrouped_items
      - item_groups
      properties:
        id:
          type: integer
        number:
          type: integer
        total_amount:
          type: string
          format: decimal
        created_at:
          type: string
          format: date-time
        completion_snapshots:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::CompletionSnapshots::CompactDto"
        ungrouped_items:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::ProjectShowResponseProjectItemDto"
        item_groups:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::ProjectShowResponseProjectItemGroupDto"
    Organization::ProjectShowResponseProjectDto:
      type: object
      required:
      - id
      - name
      - client
      - status
      - invoiced_amount
      - last_version
      properties:
        id:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        client:
          "$ref": "#/components/schemas/Organization::ProjectShowResponseProjectClientDto"
        status:
          type: string
          enum:
          - new
          - invoicing_in_progress
          - invoiced
          - canceled
        invoiced_amount:
          type: string
          format: decimal
        last_version:
          "$ref": "#/components/schemas/Organization::ProjectVersions::ExtendedDto"
    Organization::ProjectShowResponseDto:
      type: object
      required:
      - result
      properties:
        result:
          "$ref": "#/components/schemas/Organization::ProjectShowResponseProjectDto"
    Organization::ProjectVersionIndexResponseProjectDto:
      type: object
      required:
      - id
      - number
      - created_at
      properties:
        id:
          type: integer
        number:
          type: integer
        created_at:
          type: string
          format: date-time
    Organization::ProjectVersionIndexResponseDto:
      type: object
      required:
      - results
      properties:
        results:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::ProjectVersionIndexResponseProjectDto"
    Organization::ProjectVersionShowProjectVersionItemDto:
      type: object
      required:
      - id
      - position
      - name
      - quantity
      - unit
      - unit_price_cents
      properties:
        id:
          type: integer
        position:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        quantity:
          type: integer
        unit:
          type: string
        unit_price_cents:
          type: integer
    Organization::ProjectVersionShowProjectVersionItemGroupDto:
      type: object
      required:
      - id
      - position
      - name
      - grouped_items
      properties:
        id:
          type: integer
        position:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        grouped_items:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::ProjectVersionShowProjectVersionItemDto"
    Organization::ProjectVersionShowResponseProjectVersionDto:
      type: object
      required:
      - id
      - number
      - is_last_version
      - created_at
      - retention_guarantee_rate
      - ungrouped_items
      - item_groups
      properties:
        id:
          type: integer
        number:
          type: integer
        is_last_version:
          type: boolean
        created_at:
          type: string
          format: date-time
        retention_guarantee_rate:
          type: integer
        ungrouped_items:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::ProjectVersionShowProjectVersionItemDto"
        item_groups:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::ProjectVersionShowProjectVersionItemGroupDto"
    Organization::ProjectVersionShowResponseDto:
      type: object
      required:
      - result
      properties:
        result:
          "$ref": "#/components/schemas/Organization::ProjectVersionShowResponseProjectVersionDto"
    Organization::ProjectVersions::ShowDto:
      type: object
      required:
      - result
      properties:
        result:
          "$ref": "#/components/schemas/Organization::ProjectVersions::ExtendedDto"
    Organization::Projects::CompactDto:
      type: object
      required:
      - id
      - name
      - client
      - invoiced_amount
      - last_version
      - status
      properties:
        id:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        client:
          "$ref": "#/components/schemas/Organization::Clients::ExtendedDto"
        invoiced_amount:
          type: string
          format: decimal
        last_version:
          "$ref": "#/components/schemas/Organization::ProjectVersions::CompactDto"
        status:
          type: string
          enum:
          - new
          - invoicing_in_progress
          - invoiced
          - canceled
    Organization::Projects::IndexDto:
      type: object
      required:
      - results
      properties:
        results:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Projects::CompactDto"
    Organization::Projects::InvoicedItemDto:
      type: object
      required:
      - original_item_uuid
      - invoiced_amount
      properties:
        original_item_uuid:
          type: string
        invoiced_amount:
          type: string
          format: decimal
    Organization::Projects::InvoicedItemsDto:
      type: object
      required:
      - results
      properties:
        results:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Projects::InvoicedItemDto"
    Organization::ShowCompletionSnapshotResponseDto:
      type: object
      required:
      - result
      properties:
        result:
          "$ref": "#/components/schemas/Organization::CompletionSnapshots::ExtendedDto"
    QueryParamsDto:
      type: object
      required: []
      properties:
        limit:
          type: integer
          nullable: true
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
servers:
- url: https://{defaultHost}
  variables:
    defaultHost:
      default: www.example.com
