---
openapi: 3.0.1
info:
  title: API V1
  version: v1
paths:
  "/api/v1/auth/login":
    post:
      summary: Creates a session
      tags:
      - Authentication
      parameters: []
      responses:
        '200':
          description: session created
          content:
            application/json:
              schema:
                type: object
                properties:
                  access_token:
                    type: string
                  refresh_token:
                    type: string
                required:
                - access_token
                - refresh_token
        '401':
          description: invalid credentials
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                properties:
                  error:
                    type: object
                    additionalProperties: false
                    properties:
                      status:
                        type: string
                      code:
                        type: integer
                      message:
                        type: string
                      details:
                        type: object
                        nullable: true
                    required:
                    - status
                    - code
                    - message
                    - details
                required:
                - error
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                session:
                  type: object
                  properties:
                    email:
                      type: string
                      example: user@example.com
                    password:
                      type: string
                      example: password123
                  required:
                  - email
                  - password
  "/api/v1/auth/refresh":
    post:
      summary: Refresh the access token
      tags:
      - Authentication
      security:
      - bearerAuth: []
      responses:
        '200':
          description: access token refreshed
          content:
            application/json:
              schema:
                type: object
                properties:
                  access_token:
                    type: string
                required:
                - access_token
        '401':
          description: expired token
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                properties:
                  error:
                    type: object
                    additionalProperties: false
                    properties:
                      status:
                        type: string
                      code:
                        type: integer
                      message:
                        type: string
                      details:
                        type: object
                        nullable: true
                    required:
                    - status
                    - code
                    - message
                    - details
                required:
                - error
  "/api/v1/organization/companies/{company_id}/clients":
    post:
      summary: Creates a client for a company
      tags:
      - Clients
      security:
      - bearerAuth: []
      parameters:
      - name: company_id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: client created
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/client"
        '403':
          description: forbiden
        '404':
          description: company not found
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/error"
        '401':
          description: user can not create a client within this company
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/error"
        '422':
          description: client is invalid
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/error"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                registration_number:
                  type: string
                email:
                  type: string
                phone:
                  type: string
                address_street:
                  type: string
                address_city:
                  type: string
                address_zipcode:
                  type: string
              required:
              - name
              - registration_number
              - email
              - phone
              - address_street
              - address_city
              - address_zipcode
        required: true
    get:
      summary: Lists clients for a company
      tags:
      - Clients
      security:
      - bearerAuth: []
      parameters:
      - name: company_id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: clients found
          content:
            application/json:
              schema:
                type: array
                items:
                  "$ref": "#/components/schemas/client"
        '404':
          description: company not found
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/error"
        '401':
          description: unauthorised
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/error"
  "/api/v1/organization/clients/{id}":
    get:
      summary: Show client
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '403':
          description: forbiden
        '200':
          description: client's details
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::Clients::ExtendedDto"
        '404':
          description: not found
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/error"
  "/api/v1/organization/companies":
    get:
      summary: Lists user companies
      tags:
      - Companies
      security:
      - bearerAuth: []
      responses:
        '200':
          description: successfully lists user's companies
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    name:
                      type: string
                    registration_number:
                      type: string
                    email:
                      type: string
                    phone:
                      type: string
                    address_city:
                      type: string
                    address_street:
                      type: string
                    address_zipcode:
                      type: string
                  required:
                  - id
                  - name
                  - registration_number
                  - email
                  - phone
                  - address_city
                  - address_street
                  - address_zipcode
        '403':
          description: forbidden
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                properties:
                  error:
                    type: object
                    additionalProperties: false
                    properties:
                      status:
                        type: string
                      code:
                        type: integer
                      message:
                        type: string
                      details:
                        type: object
                        nullable: true
                    required:
                    - status
                    - code
                    - message
                    - details
                required:
                - error
  "/api/v1/organization/companies/{id}":
    get:
      summary: Shows a specific company
      tags:
      - Companies
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: successfully shows the company
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::Companies::ExtendedDto"
        '403':
          description: forbidden
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                properties:
                  error:
                    type: object
                    additionalProperties: false
                    properties:
                      status:
                        type: string
                      code:
                        type: integer
                      message:
                        type: string
                      details:
                        type: object
                        nullable: true
                    required:
                    - status
                    - code
                    - message
                    - details
                required:
                - error
        '404':
          description: not found
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                properties:
                  error:
                    type: object
                    additionalProperties: false
                    properties:
                      status:
                        type: string
                      code:
                        type: integer
                      message:
                        type: string
                      details:
                        type: object
                        nullable: true
                    required:
                    - status
                    - code
                    - message
                    - details
                required:
                - error
    put:
      summary: Updates a company
      tags:
      - Companies
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: company updated successfully
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::Companies::ExtendedDto"
        '422':
          description: invalid request
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                properties:
                  error:
                    type: object
                    additionalProperties: false
                    properties:
                      status:
                        type: string
                      code:
                        type: integer
                      message:
                        type: string
                      details:
                        type: object
                        nullable: true
                    required:
                    - status
                    - code
                    - message
                    - details
                required:
                - error
        '404':
          description: company not found
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                properties:
                  error:
                    type: object
                    additionalProperties: false
                    properties:
                      status:
                        type: string
                      code:
                        type: integer
                      message:
                        type: string
                      details:
                        type: object
                        nullable: true
                    required:
                    - status
                    - code
                    - message
                    - details
                required:
                - error
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                registration_number:
                  type: string
                email:
                  type: string
                phone:
                  type: string
                address_city:
                  type: string
                address_street:
                  type: string
                address_zipcode:
                  type: string
                legal_form:
                  type: string
                  enum:
                  - sasu
                  - sas
                  - eurl
                  - sa
                  - auto_entrepreneur
                rcs_city:
                  type: string
                rcs_number:
                  type: string
                vat_number:
                  type: string
                capital_amount:
                  type: number
                configs:
                  type: object
                  properties:
                    general_terms_and_conditions:
                      type: string
                    default_vat_rate:
                      type: number
                    payment_term_days:
                      type: integer
                    payment_term_accepted_methods:
                      type: array
                      items:
                        type: string
                        enum:
                        - transfer
                        - cash
                        - card
  "/api/v1/organization/companies/{company_id}/credit_notes":
    get:
      summary: Lists company's credit notes
      tags:
      - Credit Notes
      security:
      - bearerAuth: []
      parameters:
      - name: company_id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: credit notes found
          content:
            application/json:
              schema:
                type: object
                required:
                - results
                properties:
                  results:
                    type: array
                    items:
                      "$ref": "#/components/schemas/Organization::CreditNotes::CompactDto"
        '403':
          description: forbiden
  "/api/v1/organization/companies/{company_id}/draft_orders":
    get:
      summary: List all the company's draft orders
      tags:
      - Draft Orders
      security:
      - bearerAuth: []
      parameters:
      - name: company_id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: list company's draft orders
          content:
            application/json:
              schema:
                type: object
                required:
                - results
                properties:
                  results:
                    type: array
                    items:
                      "$ref": "#/components/schemas/Organization::Projects::DraftOrders::CompactDto"
  "/api/v1/organization/draft_orders/{id}":
    get:
      summary: Show draft order details
      tags:
      - Draft Orders
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: show draft order details
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::Projects::DraftOrders::ExtendedDto"
        '404':
          description: draft order not found
    put:
      summary: Update draft order
      tags:
      - Draft Orders
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: draft order updated
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::Projects::DraftOrders::ExtendedDto"
        '404':
          description: draft order not found
        '401':
          description: unauthorized
        '422':
          description: unprocessable entity
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                retention_guarantee_rate:
                  type: number
                new_items:
                  type: array
                  items:
                    type: object
                    properties:
                      group_uuid:
                        type: string
                      name:
                        type: string
                      description:
                        type: string
                      quantity:
                        type: integer
                      unit:
                        type: string
                      unit_price_amount:
                        type: number
                      position:
                        type: integer
                      tax_rate:
                        type: number
                    required:
                    - name
                    - quantity
                    - unit
                    - unit_price_amount
                    - position
                    - tax_rate
                updated_items:
                  type: array
                  items:
                    type: object
                    properties:
                      group_uuid:
                        type: string
                      quantity:
                        type: integer
                      unit_price_amount:
                        type: number
                      position:
                        type: integer
                      tax_rate:
                        type: number
                    required:
                    - quantity
                    - unit_price_amount
                    - position
                    - tax_rate
                groups:
                  type: array
                  items:
                    type: object
                    properties:
                      uuid:
                        type: string
                      name:
                        type: string
                      description:
                        type: string
                      position:
                        type: integer
                    required:
                    - uuid
                    - name
                    - position
              required:
              - name
              - retention_guarantee_rate
              - items
  "/api/v1/organization/draft_orders/{id}/convert_to_order":
    post:
      summary: Convert a draft order to an order
      tags:
      - Draft Orders
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: draft order converted to order
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::Projects::Orders::ExtendedDto"
        '404':
          description: draft order not found
        '401':
          description: unauthorized
        '422':
          description: unprocessable entity
        '403':
          description: forbiden
  "/api/v1/organization/orders/{order_id}/invoices":
    post:
      summary: Creates an invoice
      tags:
      - Invoices
      security:
      - bearerAuth: []
      parameters:
      - name: order_id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: successfully creates completion snapshot invoice
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::Invoices::ExtendedDto"
        '403':
          description: forbiden
        '404':
          description: not_found
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                properties:
                  error:
                    type: object
                    additionalProperties: false
                    properties:
                      status:
                        type: string
                      code:
                        type: integer
                      message:
                        type: string
                      details:
                        type: object
                        nullable: true
                    required:
                    - status
                    - code
                    - message
                    - details
                required:
                - error
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - invoice_amounts
              properties:
                invoice_amounts:
                  type: array
                  items:
                    type: object
                    required:
                    - original_item_uuid
                    - invoice_amount
                    properties:
                      original_item_uuid:
                        type: string
                      invoice_amount:
                        type: string
                        format: decimal
        required: true
  "/api/v1/organization/companies/{company_id}/invoices":
    get:
      summary: Lists invoices for an order
      tags:
      - Invoices
      security:
      - bearerAuth: []
      parameters:
      - name: company_id
        in: path
        required: true
        schema:
          type: integer
      - name: status
        in: query
        schema:
          type: array
          items:
            type: string
            enum:
            - draft
            - posted
            - cancelled
            - voided
      - name: order_id
        in: query
        schema:
          type: integer
      responses:
        '200':
          description: invoices found
          content:
            application/json:
              schema:
                type: object
                required:
                - results
                - meta
                properties:
                  results:
                    type: array
                    items:
                      "$ref": "#/components/schemas/Organization::Invoices::CompactDto"
                  meta:
                    "$ref": "#/components/schemas/Organization::Invoices::Meta"
        '403':
          description: forbiden
  "/api/v1/organization/companies/{company_id}/invoices/{id}":
    get:
      summary: Show invoice
      tags:
      - Invoices
      security:
      - bearerAuth: []
      parameters:
      - name: company_id
        in: path
        required: true
        schema:
          type: integer
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: invoice found
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::Invoices::ExtendedDto"
        '404':
          description: invoice not found
        '403':
          description: forbiden
    put:
      summary: Update invoice
      tags:
      - Invoices
      security:
      - bearerAuth: []
      parameters:
      - name: company_id
        in: path
        required: true
        schema:
          type: integer
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: invoice updated
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::Invoices::ExtendedDto"
        '404':
          description: invoice not found
        '422':
          description: unprocessable entity
        '403':
          description: forbiden
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
              - invoice_amounts
              properties:
                invoice_amounts:
                  type: array
                  items:
                    type: object
                    required:
                    - original_item_uuid
                    - invoice_amount
                    properties:
                      original_item_uuid:
                        type: string
                      invoice_amount:
                        type: string
                        format: decimal
        required: true
    delete:
      summary: Voids an invoice
      tags:
      - Invoices
      security:
      - bearerAuth: []
      parameters:
      - name: company_id
        in: path
        required: true
        schema:
          type: integer
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: invoice voided
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::Invoices::ExtendedDto"
        '404':
          description: not found
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                properties:
                  error:
                    type: object
                    additionalProperties: false
                    properties:
                      status:
                        type: string
                      code:
                        type: integer
                      message:
                        type: string
                      details:
                        type: object
                        nullable: true
                    required:
                    - status
                    - code
                    - message
                    - details
                required:
                - error
        '422':
          description: unprocessable entity
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                properties:
                  error:
                    type: object
                    additionalProperties: false
                    properties:
                      status:
                        type: string
                      code:
                        type: integer
                      message:
                        type: string
                      details:
                        type: object
                        nullable: true
                    required:
                    - status
                    - code
                    - message
                    - details
                required:
                - error
        '403':
          description: forbiden
    post:
      summary: Post invoice
      tags:
      - Invoices
      security:
      - bearerAuth: []
      parameters:
      - name: company_id
        in: path
        required: true
        schema:
          type: integer
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: invoice posted
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::Invoices::ExtendedDto"
        '404':
          description: invoice not found
        '422':
          description: unprocessable entity
        '403':
          description: forbiden
  "/api/v1/organization/companies/{company_id}/invoices/{id}/cancel":
    post:
      summary: Cancels an invoice
      tags:
      - Invoices
      security:
      - bearerAuth: []
      parameters:
      - name: company_id
        in: path
        required: true
        schema:
          type: integer
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: invoice cancelled
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::Invoices::ExtendedDto"
        '404':
          description: invoice not found
        '422':
          description: unprocessable entity
          content:
            application/json:
              schema:
                type: object
                additionalProperties: false
                properties:
                  error:
                    type: object
                    additionalProperties: false
                    properties:
                      status:
                        type: string
                      code:
                        type: integer
                      message:
                        type: string
                      details:
                        type: object
                        nullable: true
                    required:
                    - status
                    - code
                    - message
                    - details
                required:
                - error
        '403':
          description: forbiden
  "/api/v1/organization/companies/{company_id}/orders":
    get:
      summary: List all the company's quotes
      tags:
      - Orders
      security:
      - bearerAuth: []
      parameters:
      - name: company_id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: list company's orders
          content:
            application/json:
              schema:
                type: object
                required:
                - results
                properties:
                  results:
                    type: array
                    items:
                      "$ref": "#/components/schemas/Organization::Projects::Orders::CompactDto"
  "/api/v1/organization/orders/{id}":
    get:
      summary: Show order details
      tags:
      - Orders
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: show order details
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::Projects::Orders::ExtendedDto"
        '404':
          description: order not found
    put:
      summary: Update order
      tags:
      - Orders
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: order updated
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::Projects::Orders::ExtendedDto"
        '404':
          description: order not found
        '401':
          description: unauthorized
        '422':
          description: unprocessable entity
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                retention_guarantee_rate:
                  type: number
                new_items:
                  type: array
                  items:
                    type: object
                    properties:
                      group_uuid:
                        type: string
                      name:
                        type: string
                      description:
                        type: string
                      quantity:
                        type: integer
                      unit:
                        type: string
                      unit_price_amount:
                        type: number
                      position:
                        type: integer
                      tax_rate:
                        type: number
                    required:
                    - name
                    - quantity
                    - unit
                    - unit_price_amount
                    - position
                    - tax_rate
                updated_items:
                  type: array
                  items:
                    type: object
                    properties:
                      group_uuid:
                        type: string
                      quantity:
                        type: integer
                      unit_price_amount:
                        type: number
                      position:
                        type: integer
                      tax_rate:
                        type: number
                    required:
                    - quantity
                    - unit_price_amount
                    - position
                    - tax_rate
                groups:
                  type: array
                  items:
                    type: object
                    properties:
                      uuid:
                        type: string
                      name:
                        type: string
                      description:
                        type: string
                      position:
                        type: integer
                    required:
                    - uuid
                    - name
                    - position
              required:
              - name
              - retention_guarantee_rate
              - items
  "/api/v1/organization/orders/{id}/invoiced_items":
    get:
      summary: invoiced amount for each item
      tags:
      - Orders
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: ok
          content:
            application/json:
              schema:
                type: object
                required:
                - results
                properties:
                  results:
                    type: array
                    items:
                      "$ref": "#/components/schemas/Organization::Projects::InvoicedItemDto"
        '404':
          description: not_found
        '403':
          description: forbiden
  "/api/v1/organization/companies/{company_id}/orders/{order_id}/versions":
    get:
      summary: List all the order's versions
      tags:
      - Project versions
      security:
      - bearerAuth: []
      parameters:
      - name: company_id
        in: path
        required: true
        schema:
          type: integer
      - name: order_id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: list company's orders
          content:
            application/json:
              schema:
                type: object
                required:
                - results
                properties:
                  results:
                    type: array
                    items:
                      "$ref": "#/components/schemas/Organization::ProjectVersionIndexResponseProjectDto"
        '401':
          description: not authorised
        '404':
          description: not found
  "/api/v1/organization/project_versions/{id}":
    get:
      summary: Show the order version details
      tags:
      - Project versions
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: show order version details
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::ProjectVersions::ExtendedDto"
        '404':
          description: not found
  "/api/v1/organization/companies/{company_id}/quotes":
    get:
      summary: List all the company's quotes
      tags:
      - Quotes
      security:
      - bearerAuth: []
      parameters:
      - name: company_id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: list company's projects
          content:
            application/json:
              schema:
                type: object
                required:
                - results
                properties:
                  results:
                    type: array
                    items:
                      "$ref": "#/components/schemas/Organization::Projects::Quotes::CompactDto"
  "/api/v1/organization/quotes/{id}":
    get:
      summary: Show quote details
      tags:
      - Quotes
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: show quote details
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::Projects::Quotes::ExtendedDto"
        '404':
          description: quote not found
        '401':
          description: unauthorized
    put:
      summary: Update quote
      tags:
      - Quotes
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '200':
          description: quote updated
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::Projects::Quotes::ExtendedDto"
        '404':
          description: quote not found
        '401':
          description: unauthorized
        '422':
          description: unprocessable entity
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                retention_guarantee_rate:
                  type: number
                new_items:
                  type: array
                  items:
                    type: object
                    properties:
                      group_uuid:
                        type: string
                      name:
                        type: string
                      description:
                        type: string
                      quantity:
                        type: integer
                      unit:
                        type: string
                      unit_price_amount:
                        type: number
                      position:
                        type: integer
                      tax_rate:
                        type: number
                    required:
                    - name
                    - quantity
                    - unit
                    - unit_price_amount
                    - position
                    - tax_rate
                updated_items:
                  type: array
                  items:
                    type: object
                    properties:
                      group_uuid:
                        type: string
                      quantity:
                        type: integer
                      unit_price_amount:
                        type: number
                      position:
                        type: integer
                      tax_rate:
                        type: number
                    required:
                    - quantity
                    - unit_price_amount
                    - position
                    - tax_rate
                groups:
                  type: array
                  items:
                    type: object
                    properties:
                      uuid:
                        type: string
                      name:
                        type: string
                      description:
                        type: string
                      position:
                        type: integer
                    required:
                    - uuid
                    - name
                    - position
              required:
              - name
              - retention_guarantee_rate
              - items
  "/api/v1/organization/companies/{company_id}/clients/{client_id}/quotes":
    post:
      summary: Create a new quote for a client
      tags:
      - Quotes
      security:
      - bearerAuth: []
      parameters:
      - name: company_id
        in: path
        required: true
        schema:
          type: integer
      - name: client_id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '201':
          description: quote created
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::Projects::Quotes::ExtendedDto"
        '422':
          description: unprocessable entity
        '404':
          description: client not found
        '403':
          description: forbiden
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                retention_guarantee_rate:
                  type: number
                items:
                  type: array
                  items:
                    type: object
                    properties:
                      group_uuid:
                        type: string
                      name:
                        type: string
                      description:
                        type: string
                      quantity:
                        type: integer
                      unit:
                        type: string
                      unit_price_amount:
                        type: number
                      position:
                        type: integer
                      tax_rate:
                        type: number
                    required:
                    - name
                    - quantity
                    - unit
                    - unit_price_amount
                    - position
                    - tax_rate
                groups:
                  type: array
                  items:
                    type: object
                    properties:
                      uuid:
                        type: string
                      name:
                        type: string
                      description:
                        type: string
                      position:
                        type: integer
                    required:
                    - uuid
                    - name
                    - position
              required:
              - name
              - retention_guarantee_rate
              - items
  "/api/v1/organization/quotes/{id}/convert_to_draft_order":
    post:
      summary: Convert a quote to an order
      tags:
      - Quotes
      security:
      - bearerAuth: []
      parameters:
      - name: id
        in: path
        required: true
        schema:
          type: integer
      responses:
        '201':
          description: quote converted to order
          content:
            application/json:
              schema:
                type: object
                required:
                - result
                properties:
                  result:
                    "$ref": "#/components/schemas/Organization::Projects::DraftOrders::ExtendedDto"
        '404':
          description: quote not found
        '422':
          description: unprocessable entity
        '403':
          description: forbiden
components:
  schemas:
    client:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        registration_number:
          type: string
        email:
          type: string
        phone:
          type: string
        address_city:
          type: string
        address_street:
          type: string
        address_zipcode:
          type: string
      required:
      - id
      - name
      - registration_number
      - email
      - phone
      - address_city
      - address_street
      - address_zipcode
    create_project_with_item_groups:
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        client_id:
          type: string
        project_versions_attributes:
          type: array
          items:
            type: object
            properties:
              retention_guarantee_rate:
                type: integer
              item_groups_attributes:
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                    description:
                      type: string
                    position:
                      type: integer
                    items_attributes:
                      type: array
                      items:
                        type: object
                        properties:
                          name:
                            type: string
                          description:
                            type: string
                          position:
                            type: integer
                          quantity:
                            type: integer
                          unit_price_cents:
                            type: integer
                          unit:
                            type: string
                        required:
                        - name
                        - position
                        - quantity
                        - unit_price_cents
                        - unit
                  required:
                  - name
                  - position
                  - items_attributes
            required:
            - retention_guarantee_rate
            - item_groups_attributes
      required:
      - name
      - project_versions_attributes
    create_project_with_items:
      type: object
      properties:
        name:
          type: string
        client_id:
          type: string
        description:
          type: string
        project_versions_attributes:
          type: array
          items:
            type: object
            properties:
              retention_guarantee_rate:
                type: integer
              items_attributes:
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                    description:
                      type: string
                    position:
                      type: integer
                    quantity:
                      type: integer
                    unit_price_cents:
                      type: integer
                    unit:
                      type: string
                  required:
                  - name
                  - position
                  - quantity
                  - unit_price_cents
                  - unit
            required:
            - retention_guarantee_rate
            - items_attributes
      required:
      - name
      - project_versions_attributes
    error:
      type: object
      additionalProperties: false
      properties:
        error:
          type: object
          additionalProperties: false
          properties:
            status:
              type: string
            code:
              type: integer
            message:
              type: string
            details:
              type: object
              nullable: true
          required:
          - status
          - code
          - message
          - details
      required:
      - error
    Organization::Clients::ExtendedDto:
      type: object
      required:
      - id
      - name
      - registration_number
      - email
      - phone
      - address_street
      - address_city
      - address_zipcode
      properties:
        id:
          type: integer
        name:
          type: string
        registration_number:
          type: string
        email:
          type: string
        phone:
          type: string
        address_street:
          type: string
        address_city:
          type: string
        address_zipcode:
          type: string
    Organization::Clients::ShowDto:
      type: object
      required:
      - result
      properties:
        result:
          "$ref": "#/components/schemas/Organization::Clients::ExtendedDto"
    Organization::Companies::ExtendedDto:
      type: object
      required:
      - id
      - name
      - registration_number
      - email
      - phone
      - address_city
      - address_street
      - address_zipcode
      - legal_form
      - rcs_city
      - rcs_number
      - vat_number
      - capital_amount
      - config
      properties:
        id:
          type: integer
        name:
          type: string
        registration_number:
          type: string
        email:
          type: string
        phone:
          type: string
        address_city:
          type: string
        address_street:
          type: string
        address_zipcode:
          type: string
        legal_form:
          type: string
          enum:
          - sasu
          - sas
          - eurl
          - sa
          - auto_entrepreneur
        rcs_city:
          type: string
        rcs_number:
          type: string
        vat_number:
          type: string
        capital_amount:
          type: string
          format: decimal
        config:
          "$ref": "#/components/schemas/Organization::CompanyConfigs::ExtendedDto"
    Organization::CompanyConfigs::ExtendedDto:
      type: object
      required:
      - default_vat_rate
      - payment_term_days
      - payment_term_accepted_methods
      - general_terms_and_conditions
      properties:
        default_vat_rate:
          type: string
          format: decimal
        payment_term_days:
          type: integer
        payment_term_accepted_methods:
          type: array
          items:
            type: string
        general_terms_and_conditions:
          type: string
    Organization::Companies::ShowDto:
      type: object
      required:
      - result
      properties:
        result:
          "$ref": "#/components/schemas/Organization::Companies::ExtendedDto"
    Organization::CreateProjecItemDto:
      type: object
      required:
      - name
      - position
      - unit
      - unit_price_amount
      - quantity
      properties:
        name:
          type: string
        description:
          type: string
          nullable: true
        position:
          type: integer
        unit:
          type: string
        unit_price_amount:
          type: string
          format: decimal
        quantity:
          type: integer
    Organization::CreateProjectItemGroupDto:
      type: object
      required:
      - name
      - position
      - items
      properties:
        name:
          type: string
        description:
          type: string
          nullable: true
        position:
          type: integer
        items:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::CreateProjecItemDto"
    Organization::CreateProjectDto:
      type: object
      required:
      - name
      - client_id
      - retention_guarantee_rate
      - items
      properties:
        name:
          type: string
        description:
          type: string
          nullable: true
        client_id:
          type: integer
        retention_guarantee_rate:
          type: integer
        items:
          oneOf:
          - type: array
            items:
              "$ref": "#/components/schemas/Organization::CreateProjecItemDto"
          - type: array
            items:
              "$ref": "#/components/schemas/Organization::CreateProjectItemGroupDto"
    Organization::Invoices::CompactDto:
      type: object
      required:
      - holder_id
      - id
      - status
      - number
      - issue_date
      - updated_at
      - total_amount
      - total_excl_tax_amount
      - total_including_tax_amount
      - total_excl_retention_guarantee_amount
      properties:
        holder_id:
          type: integer
        id:
          type: integer
        status:
          type: string
          enum:
          - draft
          - posted
          - cancelled
          - voided
        number:
          type: string
        issue_date:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        total_amount:
          type: string
          format: decimal
        total_excl_tax_amount:
          type: string
          format: decimal
        total_including_tax_amount:
          type: string
          format: decimal
        total_excl_retention_guarantee_amount:
          type: string
          format: decimal
        pdf_url:
          type: string
          nullable: true
    Organization::CreditNotes::CompactDto:
      type: object
      required:
      - invoice
      - id
      - status
      - number
      - issue_date
      - updated_at
      - total_amount
      - total_excl_tax_amount
      - total_including_tax_amount
      - total_excl_retention_guarantee_amount
      properties:
        invoice:
          "$ref": "#/components/schemas/Organization::Invoices::CompactDto"
        id:
          type: integer
        status:
          type: string
          enum:
          - draft
          - posted
          - cancelled
          - voided
        number:
          type: string
        issue_date:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        total_amount:
          type: string
          format: decimal
        total_excl_tax_amount:
          type: string
          format: decimal
        total_including_tax_amount:
          type: string
          format: decimal
        total_excl_retention_guarantee_amount:
          type: string
          format: decimal
        pdf_url:
          type: string
          nullable: true
    Organization::CreditNotes::ExtendedDto::DocumentInfo:
      type: object
      required:
      - number
      - issue_date
      - original_invoice_date
      - original_invoice_number
      properties:
        number:
          type: string
        issue_date:
          type: string
          format: date-time
        original_invoice_date:
          type: string
          format: date-time
        original_invoice_number:
          type: string
    Organization::CreditNotes::ExtendedDto::Address:
      type: object
      required:
      - city
      - street
      - zip
      properties:
        city:
          type: string
        street:
          type: string
        zip:
          type: string
    Organization::CreditNotes::ExtendedDto::Seller:
      type: object
      required:
      - name
      - address
      - phone
      - siret
      - legal_form
      - capital_amount
      - vat_number
      - rcs_city
      - rcs_number
      properties:
        name:
          type: string
        address:
          "$ref": "#/components/schemas/Organization::CreditNotes::ExtendedDto::Address"
        phone:
          type: string
        siret:
          type: string
        legal_form:
          type: string
        capital_amount:
          type: string
          format: decimal
        vat_number:
          type: string
        rcs_city:
          type: string
        rcs_number:
          type: string
    Organization::CreditNotes::ExtendedDto::BillingAddress:
      type: object
      required:
      - name
      - address
      properties:
        name:
          type: string
        address:
          "$ref": "#/components/schemas/Organization::CreditNotes::ExtendedDto::Address"
    Organization::CreditNotes::ExtendedDto::ProjectVersion:
      type: object
      required:
      - date
      - number
      properties:
        date:
          type: string
          format: date-time
        number:
          type: integer
    Organization::CreditNotes::ExtendedDto::ProjectContext:
      type: object
      required:
      - name
      - version
      - total_amount
      - previously_billed_amount
      - remaining_amount
      properties:
        name:
          type: string
        version:
          "$ref": "#/components/schemas/Organization::CreditNotes::ExtendedDto::ProjectVersion"
        total_amount:
          type: string
          format: decimal
        previously_billed_amount:
          type: string
          format: decimal
        remaining_amount:
          type: string
          format: decimal
    Organization::CreditNotes::ExtendedDto::Item:
      type: object
      required:
      - id
      - original_item_uuid
      - name
      - item_group_id
      - quantity
      - unit
      - unit_price_amount
      - credit_note_amount
      properties:
        id:
          type: integer
        original_item_uuid:
          type: string
        name:
          type: string
        description:
          type: string
          nullable: true
        item_group_id:
          type: integer
        quantity:
          type: integer
        unit:
          type: string
        unit_price_amount:
          type: string
          format: decimal
        credit_note_amount:
          type: string
          format: decimal
    Organization::CreditNotes::ExtendedDto::ItemGroup:
      type: object
      required:
      - id
      - name
      - position
      properties:
        id:
          type: integer
        name:
          type: string
        position:
          type: integer
        description:
          type: string
          nullable: true
    Organization::CreditNotes::ExtendedDto::Transaction:
      type: object
      required:
      - total_excl_tax_amount
      - tax_rate
      - tax_amount
      - retention_guarantee_amount
      - retention_guarantee_rate
      - total_incl_tax_amount
      - items
      - item_groups
      - credit_note_total_amount
      properties:
        total_excl_tax_amount:
          type: string
          format: decimal
        tax_rate:
          type: string
          format: decimal
        tax_amount:
          type: string
          format: decimal
        retention_guarantee_amount:
          type: string
          format: decimal
        retention_guarantee_rate:
          type: string
          format: decimal
        total_incl_tax_amount:
          type: string
          format: decimal
        items:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::CreditNotes::ExtendedDto::Item"
        item_groups:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::CreditNotes::ExtendedDto::ItemGroup"
        credit_note_total_amount:
          type: string
          format: decimal
    Organization::CreditNotes::ExtendedDto::Payload:
      type: object
      required:
      - document_info
      - seller
      - billing_address
      - project_context
      - transaction
      properties:
        document_info:
          "$ref": "#/components/schemas/Organization::CreditNotes::ExtendedDto::DocumentInfo"
        seller:
          "$ref": "#/components/schemas/Organization::CreditNotes::ExtendedDto::Seller"
        billing_address:
          "$ref": "#/components/schemas/Organization::CreditNotes::ExtendedDto::BillingAddress"
        project_context:
          "$ref": "#/components/schemas/Organization::CreditNotes::ExtendedDto::ProjectContext"
        transaction:
          "$ref": "#/components/schemas/Organization::CreditNotes::ExtendedDto::Transaction"
    Organization::CreditNotes::ExtendedDto:
      type: object
      required:
      - payload
      - status
      properties:
        pdf_url:
          type: string
          nullable: true
        payload:
          "$ref": "#/components/schemas/Organization::CreditNotes::ExtendedDto::Payload"
        status:
          type: string
          enum:
          - draft
          - published
    Organization::CreditNotes::IndexDto:
      type: object
      required:
      - results
      properties:
        results:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::CreditNotes::CompactDto"
    Organization::Invoices::BaseExtendedDto::Line:
      type: object
      required:
      - holder_id
      - excl_tax_amount
      properties:
        holder_id:
          type: string
        excl_tax_amount:
          type: string
          format: decimal
    Organization::Invoices::BaseExtendedDto::Detail:
      type: object
      required:
      - delivery_date
      - seller_name
      - seller_registration_number
      - seller_address_zipcode
      - seller_address_street
      - seller_address_city
      - seller_vat_number
      - seller_phone
      - seller_email
      - client_name
      - client_registration_number
      - client_address_zipcode
      - client_address_street
      - client_address_city
      - client_vat_number
      - client_phone
      - client_email
      - delivery_name
      - delivery_registration_number
      - delivery_address_zipcode
      - delivery_address_street
      - delivery_address_city
      - delivery_phone
      - delivery_email
      - purchase_order_number
      - due_date
      properties:
        delivery_date:
          type: string
          format: date-time
        seller_name:
          type: string
        seller_registration_number:
          type: string
        seller_address_zipcode:
          type: string
        seller_address_street:
          type: string
        seller_address_city:
          type: string
        seller_vat_number:
          type: string
        seller_phone:
          type: string
        seller_email:
          type: string
        client_name:
          type: string
        client_registration_number:
          type: string
        client_address_zipcode:
          type: string
        client_address_street:
          type: string
        client_address_city:
          type: string
        client_vat_number:
          type: string
        client_phone:
          type: string
        client_email:
          type: string
        delivery_name:
          type: string
        delivery_registration_number:
          type: string
        delivery_address_zipcode:
          type: string
        delivery_address_street:
          type: string
        delivery_address_city:
          type: string
        delivery_phone:
          type: string
        delivery_email:
          type: string
        purchase_order_number:
          type: string
        due_date:
          type: string
          format: date-time
    Organization::Invoices::BaseExtendedDto::Context::ProjectVersionItem:
      type: object
      required:
      - original_item_uuid
      - group_id
      - name
      - quantity
      - unit
      - unit_price_amount
      - tax_rate
      - previously_billed_amount
      properties:
        original_item_uuid:
          type: string
        group_id:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        quantity:
          type: integer
        unit:
          type: string
        unit_price_amount:
          type: string
          format: decimal
        tax_rate:
          type: string
          format: decimal
        previously_billed_amount:
          type: string
          format: decimal
    Organization::Invoices::BaseExtendedDto::Context::ProjectVersionItemGroup:
      type: object
      required:
      - id
      - name
      properties:
        id:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
    Organization::Invoices::BaseExtendedDto::Context:
      type: object
      required:
      - project_name
      - project_version_retention_guarantee_rate
      - project_version_number
      - project_version_date
      - project_total_amount
      - project_total_previously_billed_amount
      - project_version_items
      - project_version_item_groups
      properties:
        project_name:
          type: string
        project_version_retention_guarantee_rate:
          type: string
          format: decimal
        project_version_number:
          type: integer
        project_version_date:
          type: string
        project_total_amount:
          type: string
          format: decimal
        project_total_previously_billed_amount:
          type: string
          format: decimal
        project_version_items:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Invoices::BaseExtendedDto::Context::ProjectVersionItem"
        project_version_item_groups:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Invoices::BaseExtendedDto::Context::ProjectVersionItemGroup"
    Organization::Invoices::BaseExtendedDto:
      type: object
      required:
      - id
      - status
      - updated_at
      - lines
      - detail
      - context
      - total_excl_tax_amount
      - total_including_tax_amount
      - total_excl_retention_guarantee_amount
      - holder_id
      properties:
        id:
          type: integer
        status:
          type: string
          enum:
          - draft
          - posted
          - cancelled
          - voided
        number:
          type: string
          nullable: true
        updated_at:
          type: string
          format: date-time
        lines:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Invoices::BaseExtendedDto::Line"
        detail:
          "$ref": "#/components/schemas/Organization::Invoices::BaseExtendedDto::Detail"
        context:
          "$ref": "#/components/schemas/Organization::Invoices::BaseExtendedDto::Context"
        pdf_url:
          type: string
          nullable: true
        total_excl_tax_amount:
          type: string
          format: decimal
        total_including_tax_amount:
          type: string
          format: decimal
        total_excl_retention_guarantee_amount:
          type: string
          format: decimal
        holder_id:
          type: integer
    Organization::Invoices::ExtendedDto:
      type: object
      required:
      - id
      - status
      - updated_at
      - lines
      - detail
      - context
      - total_excl_tax_amount
      - total_including_tax_amount
      - total_excl_retention_guarantee_amount
      - holder_id
      properties:
        id:
          type: integer
        status:
          type: string
          enum:
          - draft
          - posted
          - cancelled
          - voided
        number:
          type: string
          nullable: true
        updated_at:
          type: string
          format: date-time
        lines:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Invoices::BaseExtendedDto::Line"
        detail:
          "$ref": "#/components/schemas/Organization::Invoices::BaseExtendedDto::Detail"
        context:
          "$ref": "#/components/schemas/Organization::Invoices::BaseExtendedDto::Context"
        pdf_url:
          type: string
          nullable: true
        total_excl_tax_amount:
          type: string
          format: decimal
        total_including_tax_amount:
          type: string
          format: decimal
        total_excl_retention_guarantee_amount:
          type: string
          format: decimal
        holder_id:
          type: integer
        credit_note:
          "$ref": "#/components/schemas/Organization::Invoices::BaseExtendedDto"
          nullable: true
    Organization::ProjectVersions::CompactDto:
      type: object
      required:
      - id
      - project_id
      - number
      - created_at
      - retention_guarantee_rate
      - total_amount
      properties:
        id:
          type: integer
        project_id:
          type: integer
        number:
          type: integer
        created_at:
          type: string
          format: date-time
        retention_guarantee_rate:
          type: string
          format: decimal
        total_amount:
          type: string
          format: decimal
    Organization::Invoices::Meta:
      type: object
      required:
      - order_versions
      - orders
      properties:
        order_versions:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::ProjectVersions::CompactDto"
        orders:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Projects::Orders::CompactDto"
    Organization::Projects::BaseCompactDto:
      type: object
      required:
      - id
      - number
      - name
      - client
      - last_version
      properties:
        id:
          type: integer
        number:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        client:
          "$ref": "#/components/schemas/Organization::Clients::ExtendedDto"
        last_version:
          "$ref": "#/components/schemas/Organization::ProjectVersions::CompactDto"
    Organization::Projects::Orders::CompactDto:
      type: object
      required:
      - id
      - number
      - name
      - client
      - last_version
      - invoiced_amount
      properties:
        id:
          type: integer
        number:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        client:
          "$ref": "#/components/schemas/Organization::Clients::ExtendedDto"
        last_version:
          "$ref": "#/components/schemas/Organization::ProjectVersions::CompactDto"
        invoiced_amount:
          type: string
          format: decimal
    Organization::Invoices::IndexDto:
      type: object
      required:
      - results
      - meta
      properties:
        results:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Invoices::CompactDto"
        meta:
          "$ref": "#/components/schemas/Organization::Invoices::Meta"
    Organization::Invoices::ShowDto:
      type: object
      required:
      - result
      properties:
        result:
          "$ref": "#/components/schemas/Organization::Invoices::ExtendedDto"
    Organization::ItemGroups::ExtendedDto:
      type: object
      required:
      - id
      - position
      - name
      - grouped_items
      properties:
        id:
          type: integer
        position:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        grouped_items:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Items::ExtendedDto"
    Organization::Items::ExtendedDto:
      type: object
      required:
      - id
      - original_item_uuid
      - position
      - name
      - quantity
      - unit
      - unit_price_amount
      - tax_rate
      properties:
        id:
          type: integer
        original_item_uuid:
          type: string
        position:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        quantity:
          type: integer
        unit:
          type: string
        unit_price_amount:
          type: string
          format: decimal
        item_group_id:
          type: integer
          nullable: true
        tax_rate:
          type: string
          format: decimal
    Organization::ProjectDtoItemDto:
      type: object
      required:
      - id
      - position
      - name
      - quantity
      - unit
      - unit_price_amount
      properties:
        id:
          type: integer
        position:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        quantity:
          type: integer
        unit:
          type: string
        unit_price_amount:
          type: string
          format: decimal
    Organization::ProjectDtoItemGroupDto:
      type: object
      required:
      - id
      - name
      - position
      - items
      properties:
        id:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        position:
          type: integer
        items:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::ProjectDtoItemDto"
    Organization::ProjectDtoProjectVersionDto:
      type: object
      required:
      - id
      - retention_rate_guarantee
      - number
      - items
      properties:
        id:
          type: integer
        retention_rate_guarantee:
          type: integer
        number:
          type: integer
        items:
          oneOf:
          - type: array
            items:
              "$ref": "#/components/schemas/Organization::ProjectDtoItemDto"
          - type: array
            items:
              "$ref": "#/components/schemas/Organization::ProjectDtoItemGroupDto"
    Organization::ProjectDto:
      type: object
      required:
      - id
      - name
      - client_id
      - versions
      properties:
        id:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        client_id:
          type: integer
        versions:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::ProjectDtoProjectVersionDto"
    Organization::ProjectVersionIndexResponseProjectDto:
      type: object
      required:
      - id
      - number
      - created_at
      properties:
        id:
          type: integer
        number:
          type: integer
        created_at:
          type: string
          format: date-time
    Organization::ProjectVersionIndexResponseDto:
      type: object
      required:
      - results
      properties:
        results:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::ProjectVersionIndexResponseProjectDto"
    Organization::ProjectVersionShowProjectVersionItemDto:
      type: object
      required:
      - id
      - position
      - name
      - quantity
      - unit
      - unit_price_amount
      properties:
        id:
          type: integer
        position:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        quantity:
          type: integer
        unit:
          type: string
        unit_price_amount:
          type: string
          format: decimal
    Organization::ProjectVersionShowProjectVersionItemGroupDto:
      type: object
      required:
      - id
      - position
      - name
      - grouped_items
      properties:
        id:
          type: integer
        position:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        grouped_items:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::ProjectVersionShowProjectVersionItemDto"
    Organization::ProjectVersionShowResponseProjectVersionDto:
      type: object
      required:
      - id
      - number
      - is_last_version
      - created_at
      - retention_guarantee_rate
      - ungrouped_items
      - item_groups
      properties:
        id:
          type: integer
        number:
          type: integer
        is_last_version:
          type: boolean
        created_at:
          type: string
          format: date-time
        retention_guarantee_rate:
          type: string
          format: decimal
        ungrouped_items:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::ProjectVersionShowProjectVersionItemDto"
        item_groups:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::ProjectVersionShowProjectVersionItemGroupDto"
    Organization::ProjectVersionShowResponseDto:
      type: object
      required:
      - result
      properties:
        result:
          "$ref": "#/components/schemas/Organization::ProjectVersionShowResponseProjectVersionDto"
    Organization::ProjectVersions::ExtendedDto:
      type: object
      required:
      - id
      - number
      - created_at
      - retention_guarantee_rate
      - ungrouped_items
      - item_groups
      - project_id
      - items
      properties:
        id:
          type: integer
        number:
          type: integer
        created_at:
          type: string
          format: date-time
        retention_guarantee_rate:
          type: string
          format: decimal
        ungrouped_items:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Items::ExtendedDto"
        item_groups:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::ItemGroups::ExtendedDto"
        project_id:
          type: integer
        items:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Items::ExtendedDto"
        pdf_url:
          type: string
          nullable: true
    Organization::ProjectVersions::ShowDto:
      type: object
      required:
      - result
      properties:
        result:
          "$ref": "#/components/schemas/Organization::ProjectVersions::ExtendedDto"
    Organization::Projects::BaseExtendedDto:
      type: object
      required:
      - id
      - number
      - name
      - client
      - last_version
      properties:
        id:
          type: integer
        number:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        client:
          "$ref": "#/components/schemas/Organization::Clients::ExtendedDto"
        last_version:
          "$ref": "#/components/schemas/Organization::ProjectVersions::ExtendedDto"
    Organization::Projects::CompactDto:
      type: object
      required:
      - id
      - name
      - client
      - invoiced_amount
      - last_version
      - status
      properties:
        id:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        client:
          "$ref": "#/components/schemas/Organization::Clients::ExtendedDto"
        invoiced_amount:
          type: string
          format: decimal
        last_version:
          "$ref": "#/components/schemas/Organization::ProjectVersions::CompactDto"
        status:
          type: string
          enum:
          - new
          - invoicing_in_progress
          - invoiced
          - canceled
    Organization::Projects::DraftOrders::CompactDto:
      type: object
      required:
      - id
      - number
      - name
      - client
      - last_version
      - posted
      - posted_at
      properties:
        id:
          type: integer
        number:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        client:
          "$ref": "#/components/schemas/Organization::Clients::ExtendedDto"
        last_version:
          "$ref": "#/components/schemas/Organization::ProjectVersions::CompactDto"
        posted:
          type: boolean
        posted_at:
          type: string
          format: date-time
    Organization::Projects::DraftOrders::ExtendedDto:
      type: object
      required:
      - id
      - number
      - name
      - client
      - last_version
      - original_project_version_id
      - posted
      - orders
      properties:
        id:
          type: integer
        number:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        client:
          "$ref": "#/components/schemas/Organization::Clients::ExtendedDto"
        last_version:
          "$ref": "#/components/schemas/Organization::ProjectVersions::ExtendedDto"
        original_project_version_id:
          type: integer
        posted:
          type: boolean
        posted_at:
          type: string
          format: date-time
          nullable: true
        orders:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Projects::Orders::ExtendedDto"
    Organization::Projects::Orders::ExtendedDto:
      type: object
      required:
      - id
      - number
      - name
      - client
      - last_version
      - original_project_version_id
      - invoiced_amount
      properties:
        id:
          type: integer
        number:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        client:
          "$ref": "#/components/schemas/Organization::Clients::ExtendedDto"
        last_version:
          "$ref": "#/components/schemas/Organization::ProjectVersions::ExtendedDto"
        original_project_version_id:
          type: integer
        invoiced_amount:
          type: string
          format: decimal
    Organization::Projects::DraftOrders::IndexDto:
      type: object
      required:
      - results
      properties:
        results:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Projects::DraftOrders::CompactDto"
    Organization::Projects::DraftOrders::ShowDto:
      type: object
      required:
      - result
      properties:
        result:
          "$ref": "#/components/schemas/Organization::Projects::DraftOrders::ExtendedDto"
    Organization::Projects::ExtendedDto:
      type: object
      required:
      - id
      - name
      - client
      - invoiced_amount
      - last_version
      - status
      properties:
        id:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        client:
          "$ref": "#/components/schemas/Organization::Clients::ExtendedDto"
        invoiced_amount:
          type: string
          format: decimal
        last_version:
          "$ref": "#/components/schemas/Organization::ProjectVersions::ExtendedDto"
        status:
          type: string
          enum:
          - new
          - invoicing_in_progress
          - invoiced
          - canceled
    Organization::Projects::IndexDto:
      type: object
      required:
      - results
      properties:
        results:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Projects::CompactDto"
    Organization::Projects::InvoicedItemDto:
      type: object
      required:
      - original_item_uuid
      - invoiced_amount
      properties:
        original_item_uuid:
          type: string
        invoiced_amount:
          type: string
          format: decimal
    Organization::Projects::InvoicedItemsDto:
      type: object
      required:
      - results
      properties:
        results:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Projects::InvoicedItemDto"
    Organization::Projects::Orders::IndexDto:
      type: object
      required:
      - results
      properties:
        results:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Projects::Orders::CompactDto"
    Organization::Projects::Orders::ShowDto:
      type: object
      required:
      - result
      properties:
        result:
          "$ref": "#/components/schemas/Organization::Projects::Orders::ExtendedDto"
    Organization::Projects::Quotes::CompactDto:
      type: object
      required:
      - id
      - number
      - name
      - client
      - last_version
      - posted
      properties:
        id:
          type: integer
        number:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        client:
          "$ref": "#/components/schemas/Organization::Clients::ExtendedDto"
        last_version:
          "$ref": "#/components/schemas/Organization::ProjectVersions::CompactDto"
        posted:
          type: boolean
    Organization::Projects::Quotes::ExtendedDto:
      type: object
      required:
      - id
      - number
      - name
      - client
      - last_version
      - posted
      - draft_orders
      properties:
        id:
          type: integer
        number:
          type: integer
        name:
          type: string
        description:
          type: string
          nullable: true
        client:
          "$ref": "#/components/schemas/Organization::Clients::ExtendedDto"
        last_version:
          "$ref": "#/components/schemas/Organization::ProjectVersions::ExtendedDto"
        posted:
          type: boolean
        posted_at:
          type: string
          format: date-time
          nullable: true
        draft_orders:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Projects::DraftOrders::ExtendedDto"
    Organization::Projects::Quotes::IndexDto:
      type: object
      required:
      - results
      properties:
        results:
          type: array
          items:
            "$ref": "#/components/schemas/Organization::Projects::Quotes::CompactDto"
    Organization::Projects::Quotes::ShowDto:
      type: object
      required:
      - result
      properties:
        result:
          "$ref": "#/components/schemas/Organization::Projects::Quotes::ExtendedDto"
    Organization::Projects::ShowDto:
      type: object
      required:
      - result
      properties:
        result:
          "$ref": "#/components/schemas/Organization::Projects::ExtendedDto"
    QueryParamsDto:
      type: object
      required: []
      properties:
        limit:
          type: integer
          nullable: true
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
servers:
- url: https://{defaultHost}
  variables:
    defaultHost:
      default: www.example.com
